<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright © 2014 <code@io7m.com> http://io7m.com

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted, provided that the above
  copyright notice and this permission notice appear in all copies.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
  WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
  MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
  ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
  WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
  ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
  OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  -->

<s:document
  xmlns:s="http://schemas.io7m.com/structural/2.1.0"
  xmlns:xi="http://www.w3.org/2001/XInclude">
  <s:document-title>com.io7m.changelog 4.0.0-beta0001 Documentation</s:document-title>
  <s:document-style>documentation.css</s:document-style>
  <s:document-contents/>

  <s:part>
    <s:part-title>Package Information</s:part-title>
    <s:part-contents />
    <s:section>
      <s:section-title>Orientation</s:section-title>
      <s:subsection>
        <s:subsection-title>Overview</s:subsection-title>
        <s:paragraph>
          The <s:term s:type="package">com.io7m.changelog</s:term> package
          implements a schema for expressing humanly readable software changelogs
          and a set of Java functions for manipulating them and converting them
          to various output formats (plain text, XHTML, etc).
        </s:paragraph>
      </s:subsection>
    </s:section>

    <s:section>
      <s:section-title>Installation</s:section-title>
      <s:subsection>
        <s:subsection-title>Source compilation</s:subsection-title>
        <s:paragraph>
          The project can be compiled and installed with
          <s:link-external s:target="http://maven.apache.org">Maven</s:link-external>:
        </s:paragraph>
        <s:paragraph>
          <s:verbatim s:type="example"><![CDATA[$ mvn -C clean install]]></s:verbatim>
        </s:paragraph>
      </s:subsection>

      <s:subsection>
        <s:subsection-title>Maven</s:subsection-title>
        <s:paragraph>
          Regular releases are made to the
          <s:link-external s:target="http://search.maven.org/#search%7Cga%7C1%7Ccom.io7m.changelog">Central Repository</s:link-external>,
          so it's possible to use the <s:term s:type="package">com.io7m.changelog</s:term>
          package in your projects with the following Maven dependencies:
        </s:paragraph>
        <s:paragraph>
          <s:verbatim s:type="example"><![CDATA[<dependency>
  <groupId>com.io7m.changelog</groupId>
  <artifactId>com.io7m.changelog-core</artifactId>
  <version>4.0.0-beta0001</version>
</dependency>
<dependency>
  <groupId>com.io7m.changelog</groupId>
  <artifactId>com.io7m.changelog-xom</artifactId>
  <version>4.0.0-beta0001</version>
</dependency>
<dependency>
  <groupId>com.io7m.changelog</groupId>
  <artifactId>com.io7m.changelog-text</artifactId>
  <version>4.0.0-beta0001</version>
</dependency>]]></s:verbatim>
        </s:paragraph>
        <s:paragraph>
          All <s:link-external s:target="http://io7m.com">io7m.com</s:link-external>
          packages use Semantic Versioning
          <s:footnote>
            <s:link-external s:target="http://semver.org">http://semver.org</s:link-external>
          </s:footnote>, which implies that it is always safe to use version ranges
          with an exclusive upper bound equal to the next major version - the API of
          the package will not change in a backwards-incompatible manner before the
          next major version.
        </s:paragraph>
      </s:subsection>
    </s:section>

    <s:section>
      <s:section-title>Platform Specific Issues</s:section-title>
      <s:paragraph>
        There are currently no known platform-specific issues.
      </s:paragraph>
    </s:section>

    <s:section>
      <s:section-title>License</s:section-title>
      <s:paragraph>
        All files distributed with the <s:term s:type="package">com.io7m.changelog</s:term>
        package are placed under the following license:
        <s:verbatim s:type="license"><![CDATA[Copyright © 2014 <code@io7m.com> http://io7m.com

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.]]>
        </s:verbatim>
      </s:paragraph>
    </s:section>
  </s:part>

  <s:part>
    <s:part-title>Informal Guide To Changelogs</s:part-title>
    <s:part-contents/>
    <s:section xml:id="com.io7m.changelog.guide.overview">
      <s:section-title>Overview</s:section-title>
      <s:paragraph>
        A <s:term s:type="term">changelog</s:term> records a series of
        <s:term s:type="term">releases</s:term>, each of which may be associated
        with a <s:term s:type="term">ticket system</s:term>.
        A <s:term s:type="term">release</s:term> consists of a series of
        <s:term s:type="term">changes</s:term> with each change affecting
        zero or more <s:term s:type="term">tickets</s:term> of the current
        <s:term s:type="term">ticket system</s:term>.
      </s:paragraph>
      <s:paragraph>
        Each <s:term s:type="term">change</s:term> has a
        <s:term s:type="term">type</s:term>, the intention being that
        backwards-incompatible software changes can be easily
        distinguished by their <s:term s:type="term">type</s:term>.
      </s:paragraph>
    </s:section>
    <s:section xml:id="com.io7m.changelog.guide.example">
      <s:section-title>Example</s:section-title>
      <s:paragraph>
        An example changelog is as follows:
      </s:paragraph>
      <s:formal-item s:kind="examples">
        <s:formal-item-title>Changelog</s:formal-item-title>
        <s:verbatim><![CDATA[<c:changelog xmlns:c="http://schemas.io7m.com/changelog/2.0.0">
  <c:project>io7m-changelog</c:project>

  <c:release ticket-system="com.io7m.fossil.changelog">
    <c:date>2014-04-17</c:date>
    <c:version>2.0.0</c:version>
    <c:item>
      <c:date>2014-04-17</c:date>
      <c:type-code-new/>
      <c:summary>Allow for zero or more releases in a file</c:summary>
    </c:item>
    <c:item>
      <c:date>2014-04-17</c:date>
      <c:type-code-change/>
      <c:summary>Do not allow xml:id on changelogs</c:summary>
    </c:item>
    <c:item>
      <c:date>2014-04-17</c:date>
      <c:type-code-new/>
      <c:summary>Allow multiple tickets per changelog item</c:summary>
    </c:item>
    <c:item>
      <c:date>2014-04-17</c:date>
      <c:type-code-change/>
      <c:summary>Redevelop package in Java, eliminate XSLT stylesheets</c:summary>
    </c:item>
    <c:item>
      <c:date>2014-04-17</c:date>
      <c:type-code-change/>
      <c:summary>Change schema URI and increment version to 2.0.0</c:summary>
    </c:item>
  </c:release>

  <c:release ticket-system="com.io7m.fossil.changelog">
    <c:date>2012-03-15</c:date>
    <c:version>1.0.0</c:version>
    <c:item>
      <c:date>2012-03-15</c:date>
      <c:type-code-new/>
      <c:summary>Initial release</c:summary>
    </c:item>
  </c:release>

  <c:ticket-system xml:id="com.io7m.fossil.changelog">
    <c:ticket-url>http://fossil.io7m.com/repo.cgi/io7m-changelog/tktview?name=</c:ticket-url>
  </c:ticket-system>
</c:changelog>]]></s:verbatim>
      </s:formal-item>
      <s:paragraph>
        The above, when processed with the
        <s:link-external s:target="apidocs/com/io7m/changelog/text/CChangelogTextWriter.html">CChangelogTextWriter</s:link-external>
        class will produce the following output:
      </s:paragraph>
      <s:formal-item s:kind="examples">
        <s:formal-item-title>Changelog</s:formal-item-title>
        <s:verbatim><![CDATA[2014-04-17 Release: io7m-changelog 2.0.0
2014-04-17 Code new: Allow for zero or more releases in a file
2014-04-17 Code change: Do not allow xml:id on changelogs
2014-04-17 Code new: Allow multiple tickets per changelog item
2014-04-17 Code change: Redevelop package in Java, eliminate XSLT stylesheets
2014-04-17 Code change: Change schema URI and increment version to 2.0.0
2012-03-15 Release: io7m-changelog 1.0.0
2012-03-15 Code new: Initial release]]></s:verbatim>
      </s:formal-item>
    </s:section>
  </s:part>

  <s:part>
    <s:part-title>Maven plugin</s:part-title>
    <s:part-contents/>
    <s:section>
      <s:section-title>Overview</s:section-title>
      <s:paragraph>
        The <s:term s:type="package">changelog</s:term> package provides
        a Maven plugin for generating site pages for changelogs, complete
        with an <s:link-external s:target="http://tools.ietf.org/html/rfc4287">Atom</s:link-external>
        feed for releases.
      </s:paragraph>
    </s:section>
    <s:section>
      <s:section-title>Usage</s:section-title>
      <s:paragraph>
        The following should be placed in the <s:term s:type="element">reporting</s:term>
        section of your project's <s:term s:type="file">pom.xml</s:term>:
      </s:paragraph>
      <s:formal-item s:kind="examples">
        <s:formal-item-title>Report example</s:formal-item-title>
        <s:verbatim><![CDATA[<plugin>
  <groupId>com.io7m.changelog</groupId>
  <artifactId>com.io7m.changelog-plugin</artifactId>
  <version>4.0.0-beta0001</version>
  <configuration>
    <file>README-CHANGES.xml</file>
    <feedAuthorEmail>contact@io7m.com</feedAuthorEmail>
    <feedAuthorName>io7m release robot</feedAuthorName>
  </configuration>
</plugin>]]></s:verbatim>
      </s:formal-item>
      <s:paragraph>
        Where the <s:term s:type="element">file</s:term> parameter specifies
        the path to an XML changelog relative to the current project root, and
        the <s:term s:type="element">feedAuthorEmail</s:term> and
        <s:term s:type="element">feedAuthorName</s:term> parameters specify
        the author email and author name that will appear in the generated Atom feed,
        respectively.
      </s:paragraph>
      <s:paragraph>
        The plugin will generate files <s:term s:type="file">changes.html</s:term>
        and <s:term s:type="file">releases.atom</s:term> in the root of the generated
        site directory.
      </s:paragraph>
    </s:section>
  </s:part>

  <s:part>
    <s:part-title>API Reference</s:part-title>
    <s:part-contents/>
    <s:section>
      <s:section-title>Javadoc</s:section-title>
      <s:paragraph>
        API documentation for the package is provided via the
        included <s:link-external s:target="apidocs">Javadoc</s:link-external>.
      </s:paragraph>
    </s:section>
  </s:part>

</s:document>
